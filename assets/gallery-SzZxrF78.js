import{r as n,u as v,x as w,y as j,J as y,A as k,j as t,K as N}from"./index-DhgEgQ22.js";import{l as z,F as C,r as I,k as S}from"./index-BcBABBbU.js";import{n as d}from"./index-BBB4lfJl.js";const R=()=>{const[r,c]=n.useState([]),[p,u]=n.useState(!0),[l,o]=n.useState(null),{user:m}=v(),b=m&&m.uid==="2t2Fg2aX8ePpfhsDAWoYEosDcmv1";n.useEffect(()=>{x()},[]);const x=async()=>{u(!0);try{const e=w(j,"posts/"),a=(await y(e)).items.map(async i=>({url:await k(i),ref:i,name:i.name})),h=await Promise.all(a);h.sort((i,f)=>f.name.localeCompare(i.name)),c(h)}catch(e){console.error("Galeri hatası:",e),d.error("Resimler yüklenemedi.")}finally{u(!1)}},g=async e=>{if(window.confirm("Bu resmi kalıcı olarak silmek istiyor musunuz?"))try{await N(e.ref),c(s=>s.filter(a=>a.url!==e.url)),d.success("Resim silindi."),l?.url===e.url&&o(null)}catch(s){console.error("Silme hatası:",s),d.error("Silinemedi.")}};return t.jsxs("div",{className:"w-full h-full flex flex-col font-['Ubuntu'] bg-slate-50 overflow-y-auto",children:[t.jsx("div",{className:"flex-1 p-6",children:p?t.jsx("div",{className:"flex justify-center pt-20",children:t.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin"})}):r.length===0?t.jsx("div",{className:"text-center text-slate-400 pt-20",children:"Hiç resim yok."}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((e,s)=>t.jsxs("div",{className:"relative group aspect-square rounded-xl overflow-hidden bg-slate-200 cursor-pointer border border-slate-100 shadow-sm hover:shadow-md transition-all",children:[t.jsx("img",{src:e.url,alt:"Gallery Item",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onClick:()=>o(e),loading:"lazy"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300 pointer-events-none"})]},s))})}),l&&t.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-md flex items-center justify-center animate-in fade-in duration-200",onClick:()=>o(null),children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-40 pointer-events-none"}),t.jsx("button",{className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 text-white rounded-full backdrop-blur-md transition-all z-50 border border-white/5",onClick:()=>o(null),children:t.jsx(z,{size:24})}),t.jsx("button",{className:"absolute left-2 md:left-8 top-1/2 -translate-y-1/2 p-4 text-white/50 hover:text-white hover:bg-white/10 rounded-full transition-all z-40 disabled:opacity-0",onClick:e=>{e.stopPropagation();const s=r.findIndex(a=>a.url===l.url);s>0&&o(r[s-1])},disabled:r.findIndex(e=>e.url===l.url)===0,children:t.jsx(C,{size:48})}),t.jsx("button",{className:"absolute right-2 md:right-8 top-1/2 -translate-y-1/2 p-4 text-white/50 hover:text-white hover:bg-white/10 rounded-full transition-all z-40 disabled:opacity-0",onClick:e=>{e.stopPropagation();const s=r.findIndex(a=>a.url===l.url);s<r.length-1&&o(r[s+1])},disabled:r.findIndex(e=>e.url===l.url)===r.length-1,children:t.jsx(I,{size:48})}),b&&t.jsxs("button",{className:"absolute top-6 left-6 p-3 bg-white/10 hover:bg-red-600/90 text-white rounded-full backdrop-blur-md transition-all z-50 border border-white/5 flex items-center gap-2 group",onClick:e=>{e.stopPropagation(),g(l)},title:"Resmi Sil",children:[t.jsx(S,{size:24}),t.jsx("span",{className:"text-sm font-medium overflow-hidden w-0 group-hover:w-auto opacity-0 group-hover:opacity-100 transition-all duration-300",children:"Sil"})]}),t.jsx("img",{src:l.url,alt:"Full View",className:"max-w-[90vw] max-h-[90vh] object-contain animate-in zoom-in-95 duration-300 select-none relative z-30",onClick:e=>e.stopPropagation()})]})]})};export{R as default};
