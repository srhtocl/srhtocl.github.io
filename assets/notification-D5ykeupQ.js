import{q as i,w as a,e as t,o as c,f as u,g as f,s as d,h as l,i as h}from"./index-4uZqEcd5.js";async function p(e){let r=null;try{r=(await u(t,e)).id}catch(o){return o.message}finally{return r}}async function y(e){var r=null;try{const o=f(t,e);r=await h(o)}catch(o){r=o.message}finally{return r}}async function w(e){try{var r=[];if(!e)throw new Error("user is undefined");if((await l(i(t,a("user","==",e)))).forEach(n=>{r.push(n)}),r.length===0)throw new Error("user not foundddd");return r[0]}catch(o){return o}}async function g(e,r){try{const o=await w(e);if(o&&o.id){const n=f(t,o.id);await d(n,r)}else console.error("Document not found for user:",e)}catch(o){return console.error("Error in setDocument:",o),o}}function D(e){const r=i(t);return c(r,o=>{const n=[];o.forEach(s=>{n.push({...s.data(),docId:s.id})}),e(n)})}function N(e,r){if(!e)return()=>{};const o=i(t,a("user","==",e));return c(o,n=>{n.empty?r(null):r(n.docs[0].data())},n=>{console.error("Subscription error:",n)})}const q=async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support desktop notification"),!1),v=async(e,r)=>{if(Notification.permission==="granted")try{if("serviceWorker"in navigator){const o=await navigator.serviceWorker.ready;if(o&&"showNotification"in o){await o.showNotification(e,{body:r,icon:"/favicon.ico"});return}}new Notification(e,{body:r,icon:"/favicon.ico"})}catch(o){console.warn("Bildirim hatası (Önemsiz):",o)}};export{N as a,g as b,D as c,y as d,p as i,q as r,v as s};
