import{q as s,w as a,e as t,o as c,f,g as u,s as d,h as l,i as m}from"./index-C4cemEEy.js";async function w(r){let e=null;try{e=(await f(t,r)).id}catch(o){return o.message}finally{return e}}async function y(r){var e=null;try{const o=u(t,r);e=await m(o)}catch(o){e=o.message}finally{return e}}async function p(r){try{var e=[];if(!r)throw new Error("user is undefined");if((await l(s(t,a("user","==",r)))).forEach(n=>{e.push(n)}),e.length===0)throw new Error("user not foundddd");return e[0]}catch(o){return o}}async function g(r,e){try{const o=await p(r);if(o&&o.id){const n=u(t,o.id);await d(n,e)}else console.error("Document not found for user:",r)}catch(o){return console.error("Error in setDocument:",o),o}}function D(r){const e=s(t);return c(e,o=>{const n=[];o.forEach(i=>{n.push({...i.data(),docId:i.id})}),r(n)})}function q(r,e){if(!r)return()=>{};const o=s(t,a("user","==",r));return c(o,n=>{n.empty?e(null):e(n.docs[0].data())},n=>{console.error("Subscription error:",n)})}const N=async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support desktop notification"),!1),b=(r,e)=>{Notification.permission==="granted"&&new Notification(r,{body:e,icon:"/favicon.ico"})};export{q as a,g as b,D as c,y as d,w as i,N as r,b as s};
