import{r as c,a as j,j as e,R as h}from"./index-CVH5nPcp.js";import{l as w,m as N,j as y,k as z,n as k}from"./index-DAoS2tL7.js";import{d as D,g as p}from"./post-methods-CQN3zKco.js";const b=({post:s,onDelete:i})=>{const[d,n]=c.useState(!1),a=j(),o=async()=>{window.confirm("Bu gönderiyi silmek istediğinize emin misiniz?")&&(await D(s.id)===null?i&&i(s.id):alert("Silme işlemi başarısız oldu."))};return e.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg shadow-sm overflow-hidden relative",children:[e.jsxs("div",{className:"bg-slate-100/50 px-4 py-3 flex justify-between items-center border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden p-0.5 border border-slate-200",children:e.jsx("img",{src:"https://pbs.twimg.com/profile_images/1483105275766882304/4CYpr2hO_400x400.jpg",alt:"Serhat Öcal",className:"w-full h-full rounded-full object-cover"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-slate-700 font-bold text-sm font-['Ubuntu']",children:"serhat öcal"}),e.jsx("span",{className:"text-slate-400 text-xs",children:(()=>{const l=s.timestamp;return(l?.toDate?l.toDate():new Date(l||Date.now())).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})})()})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>n(!d),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-200/50 rounded-full transition-colors",children:e.jsx(w,{size:20})}),d&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-36 bg-white rounded-xl shadow-xl border border-slate-100 py-1 z-20 overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("button",{onClick:()=>a("/create-post",{state:{postToEdit:s}}),className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 flex items-center gap-2 transition-colors",children:[e.jsx(N,{size:14}),e.jsx("span",{children:"Düzenle"})]}),e.jsxs("button",{onClick:o,className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2 transition-colors",children:[e.jsx(y,{size:14}),e.jsx("span",{children:"Sil"})]})]}),d&&e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)})]})]}),e.jsx("div",{className:"p-4 bg-slate-50/30 min-h-[5rem]",children:e.jsx("p",{className:"text-slate-700 font-['Ubuntu'] text-lg leading-relaxed whitespace-pre-wrap",children:s.content})}),e.jsxs("div",{className:"bg-slate-100/50 px-4 py-3 flex items-center gap-4 border-t border-slate-100",children:[e.jsx("button",{className:"flex items-center gap-2 text-slate-400 hover:text-blue-500 transition-colors group",title:"Görsel (Yakında)",children:e.jsx(z,{size:20,className:"group-hover:scale-110 transition-transform"})}),e.jsx("button",{className:"flex items-center gap-2 text-slate-400 hover:text-blue-500 transition-colors group",title:"Bağlantı (Yakında)",children:e.jsx(k,{size:20,className:"group-hover:scale-110 transition-transform"})})]})]})};function E(){const[s,i]=c.useState([]),[d,n]=c.useState(null),[a,o]=c.useState(!1),[l,x]=c.useState(!0),u=h.useRef(),g=h.useCallback(t=>{a||(u.current&&u.current.disconnect(),u.current=new IntersectionObserver(r=>{r[0].isIntersecting&&l&&(n(m=>m),v())}),t&&u.current.observe(t))},[a,l]),v=async()=>{if(a||!l)return;o(!0);const t=await p(d);t.posts.length>0?(i(r=>[...r,...t.posts]),n(t.lastVisible),t.posts.length<10&&x(!1)):x(!1),o(!1)},f=t=>{i(r=>r.filter(m=>m.id!==t))};return c.useEffect(()=>{(async()=>{o(!0);const t=await p(null);i(t.posts),n(t.lastVisible),t.posts.length<10&&x(!1),o(!1)})()},[]),e.jsxs("div",{className:"relative flex flex-col w-full h-[100dvh] overflow-hidden bg-slate-50",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[60vw] h-[60vw] bg-slate-300 rounded-full mix-blend-multiply filter blur-[80px] opacity-20 animate-blob pointer-events-none"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60vw] h-[60vw] bg-gray-300 rounded-full mix-blend-multiply filter blur-[80px] opacity-20 animate-blob animation-delay-2000 pointer-events-none"}),e.jsxs("div",{className:"flex-1 overflow-y-auto z-10 w-full max-w-2xl mx-auto px-4 py-6 custom-scrollbar space-y-4",children:[s.map((t,r)=>s.length===r+1?e.jsx("div",{ref:g,children:e.jsx(b,{post:t,onDelete:f})},t.id):e.jsx(b,{post:t,onDelete:f},t.id)),a&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin"})}),!l&&s.length>0&&e.jsx("p",{className:"text-center text-slate-400 py-4 text-xs",children:"Tüm gönderiler yüklendi."}),!a&&s.length===0&&e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 font-['Ubuntu']",children:e.jsx("p",{children:"Henüz gönderi yok."})})]})]})}export{E as default};
