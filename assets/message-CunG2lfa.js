import{r as d,j as i}from"./index-4uZqEcd5.js";import{M as v}from"./message-field-CWX5-jRJ.js";import{r as w,s as j,i as y,a as C,b as D}from"./notification-D5ykeupQ.js";import{h as N}from"./index-CpIN7OEE.js";function m(t){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var f in n)t[f]=n[f]}return t}var U={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function b(t,l){function n(s,u,e){if(!(typeof document>"u")){e=m({},l,e),typeof e.expires=="number"&&(e.expires=new Date(Date.now()+e.expires*864e5)),e.expires&&(e.expires=e.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var o in e)e[o]&&(c+="; "+o,e[o]!==!0&&(c+="="+e[o].split(";")[0]));return document.cookie=s+"="+t.write(u,s)+c}}function f(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var u=document.cookie?document.cookie.split("; "):[],e={},c=0;c<u.length;c++){var o=u[c].split("="),p=o.slice(1).join("=");try{var r=decodeURIComponent(o[0]);if(e[r]=t.read(p,r),s===r)break}catch{}}return s?e[s]:e}}return Object.create({set:n,get:f,remove:function(s,u){n(s,"",m({},u,{expires:-1}))},withAttributes:function(s){return b(this.converter,m({},this.attributes,s))},withConverter:function(s){return b(m({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(l)},converter:{value:Object.freeze(t)}})}var h=b(U,{path:"/"});function E(){const[t,l]=d.useState(""),[n,f]=d.useState([]),[s,u]=d.useState(null),[e,c]=d.useState(!0),o=d.useRef(0);d.useEffect(()=>{w()},[]),d.useEffect(()=>{if(e){o.current=n.length;return}if(n.length>o.current){const r=n[n.length-1];r.user==="admin"&&j("Yeni Cevap Var!",r.data),o.current=n.length}},[n,e]),d.useEffect(()=>{let r=null;return(async()=>{let a=h.get("user");a?h.set("user",a,{expires:7}):(a=new Date().getTime().toString(16),h.set("user",a,{expires:7}),await y({user:a,messages:[]})),u(a),r=C(a,g=>{g&&g.messages&&f(g.messages),c(!1)})})(),()=>{r&&r()}},[]);const p=async r=>{if(r.preventDefault(),!t.trim())return;const x={user:s,time:new Date().getTime(),data:t.trim()},a=[...n,x];f(a),l(""),await D(s,{user:s,messages:a})};return i.jsxs("div",{className:"fixed inset-0 flex flex-col w-full h-full overflow-hidden bg-slate-50 overscroll-none",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50vw] h-[50vw] bg-slate-300 rounded-full mix-blend-multiply filter blur-[60px] opacity-20 animate-blob pointer-events-none"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50vw] h-[50vw] bg-gray-300 rounded-full mix-blend-multiply filter blur-[60px] opacity-20 animate-blob animation-delay-2000 pointer-events-none"}),i.jsx("div",{className:"flex-1 overflow-y-auto z-10 w-full max-w-2xl mx-auto px-4 custom-scrollbar pb-4 pt-4",children:e?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin"})}):i.jsx(v,{messages:n})}),i.jsx("div",{className:"flex-none z-20 w-full max-w-2xl mx-auto p-4 bg-slate-50/50 backdrop-blur-md border-t border-white/50",children:i.jsxs("form",{className:"flex items-center gap-2 bg-white rounded-2xl shadow-lg border border-slate-200 p-2 transition-all focus-within:ring-2 focus-within:ring-slate-300/50",onSubmit:p,children:[i.jsx("input",{className:"flex-auto bg-transparent border-none outline-none px-4 py-3 text-slate-700 placeholder-slate-400 font-['Ubuntu'] min-w-0",type:"text",value:t,placeholder:"Bir mesaj bÄ±rak...",onChange:r=>l(r.target.value)}),i.jsx("button",{type:"submit",disabled:!t.trim(),className:"flex-none flex items-center justify-center w-12 h-12 bg-slate-900 text-white rounded-xl hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md active:scale-95",children:i.jsx(N,{size:20,className:t.trim()?"translate-x-0.5":""})})]})})]})}export{E as default};
