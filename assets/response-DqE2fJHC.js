import{d as x,a as p,u as g,r as a,j as e}from"./index-CcNtxvwf.js";import{M as h}from"./message-field-CBRCC9vA.js";import{r as w,a as v,s as j,b as y}from"./notification-K7kDXOV0.js";import{h as N}from"./index-1gPmKOmF.js";function z(){const{userid:r}=x(),u=p(),d=g(),i=a.useRef(0);a.useEffect(()=>{d.user?w("admin_device"):u("/")},[d.user,u]);const[l,c]=a.useState(""),[s,m]=a.useState([]),[o,f]=a.useState(!0);a.useEffect(()=>{if(!r)return;const t=v(r,n=>{n&&n.messages&&m(n.messages),f(!1)});return()=>t()},[r]),a.useEffect(()=>{if(!o){if(!initialLoadComplete.current){i.current=s.length,initialLoadComplete.current=!0;return}if(s.length>i.current){const t=s[s.length-1];t&&t.user!=="admin"&&j("Yeni Cevap!",t.data),i.current=s.length}}},[s,o]);const b=async t=>{if(t.preventDefault(),!l.trim()||sending)return;setSending(!0);const n=[...s,{user:"admin",time:new Date().getTime(),data:l.trim()}];m(n),c("");try{await y(r,{user:r,messages:n})}finally{setSending(!1)}};return e.jsxs("div",{className:"fixed inset-0 flex flex-col w-full h-full overflow-hidden bg-slate-50 overscroll-none",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50vw] h-[50vw] bg-slate-300 rounded-full mix-blend-multiply filter blur-[60px] opacity-20 animate-blob pointer-events-none"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50vw] h-[50vw] bg-gray-300 rounded-full mix-blend-multiply filter blur-[60px] opacity-20 animate-blob animation-delay-2000 pointer-events-none"}),e.jsx("div",{className:"flex-1 overflow-y-auto z-10 w-full max-w-2xl mx-auto px-4 custom-scrollbar pb-4 pt-4",children:o?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin"})}):e.jsx(h,{messages:s})}),e.jsx("div",{className:"flex-none z-20 w-full max-w-2xl mx-auto p-4 bg-slate-50/50 backdrop-blur-md border-t border-white/50",children:e.jsxs("form",{className:"flex items-center gap-2 bg-white rounded-2xl shadow-lg border border-slate-200 p-2 transition-all focus-within:ring-2 focus-within:ring-slate-300/50",onSubmit:b,children:[e.jsx("input",{className:"flex-auto bg-transparent border-none outline-none px-4 py-3 text-slate-700 placeholder-slate-400 font-['Ubuntu'] min-w-0",type:"text",value:l,placeholder:"Bir cevap yaz...",onChange:t=>c(t.target.value)}),e.jsx("button",{type:"submit",disabled:!l.trim()||sending,className:"flex-none flex items-center justify-center w-12 h-12 bg-slate-900 text-white rounded-xl hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md active:scale-95",children:sending?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(N,{size:20,className:l.trim()?"translate-x-0.5":""})})]})})]})}export{z as default};
