import{x as g,y as f,J as p,A as b,K as x,r as u,u as v,j as e}from"./index-CaIjCW_9.js";import{j as w,F as j,r as y,l as k}from"./index-CLdYaTTE.js";import{n as h}from"./index-COdLnx3c.js";const N=async()=>{const s=g(f,"posts/"),c=(await p(s)).items.map(async r=>({url:await b(r),ref:r,name:r.name})),a=await Promise.all(c);return a.sort((r,i)=>i.name.localeCompare(r.name)),a},I=async s=>{await x(s)},z=()=>{const[s,n]=u.useState([]),[c,a]=u.useState(!0),r=u.useCallback(async()=>{a(!0);try{const l=await N();n(l)}catch(l){console.error("Galeri hatası:",l),h.error("Resimler yüklenemedi.")}finally{a(!1)}},[]);return u.useEffect(()=>{r()},[r]),{images:s,loading:c,removeImage:async l=>{try{return await I(l.ref),n(d=>d.filter(t=>t.url!==l.url)),h.success("Resim silindi."),!0}catch(d){return console.error("Silme hatası:",d),h.error("Silinemedi."),!1}},refreshGallery:r}},P=()=>{const{images:s,loading:n,removeImage:c}=z(),[a,r]=u.useState(null),{user:i}=v(),l=i&&i.uid==="2t2Fg2aX8ePpfhsDAWoYEosDcmv1",d=async t=>{if(!window.confirm("Bu resmi kalıcı olarak silmek istiyor musunuz?"))return;await c(t)&&a?.url===t.url&&r(null)};return e.jsxs("div",{className:"w-full h-full flex flex-col font-['Ubuntu'] bg-slate-50 overflow-y-auto",children:[e.jsx("div",{className:"flex-1 p-6",children:n?e.jsx("div",{className:"flex justify-center pt-20",children:e.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin"})}):s.length===0?e.jsx("div",{className:"text-center text-slate-400 pt-20",children:"Hiç resim yok."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((t,o)=>e.jsxs("div",{className:"relative group aspect-square rounded-xl overflow-hidden bg-slate-200 cursor-pointer border border-slate-100 shadow-sm hover:shadow-md transition-all",children:[e.jsx("img",{src:t.url,alt:"Gallery Item",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onClick:()=>r(t),loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300 pointer-events-none"})]},o))})}),a&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-md flex items-center justify-center animate-in fade-in duration-200",onClick:()=>r(null),children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-40 pointer-events-none"}),e.jsx("button",{className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 text-white rounded-full backdrop-blur-md transition-all z-50 border border-white/5",onClick:()=>r(null),children:e.jsx(w,{size:24})}),e.jsx("button",{className:"absolute left-2 md:left-8 top-1/2 -translate-y-1/2 p-4 text-white/50 hover:text-white hover:bg-white/10 rounded-full transition-all z-40 disabled:opacity-0",onClick:t=>{t.stopPropagation();const o=s.findIndex(m=>m.url===a.url);o>0&&r(s[o-1])},disabled:s.findIndex(t=>t.url===a.url)===0,children:e.jsx(j,{size:48})}),e.jsx("button",{className:"absolute right-2 md:right-8 top-1/2 -translate-y-1/2 p-4 text-white/50 hover:text-white hover:bg-white/10 rounded-full transition-all z-40 disabled:opacity-0",onClick:t=>{t.stopPropagation();const o=s.findIndex(m=>m.url===a.url);o<s.length-1&&r(s[o+1])},disabled:s.findIndex(t=>t.url===a.url)===s.length-1,children:e.jsx(y,{size:48})}),l&&e.jsxs("button",{className:"absolute top-6 left-6 p-3 bg-white/10 hover:bg-red-600/90 text-white rounded-full backdrop-blur-md transition-all z-50 border border-white/5 flex items-center gap-2 group",onClick:t=>{t.stopPropagation(),d(a)},title:"Resmi Sil",children:[e.jsx(k,{size:24}),e.jsx("span",{className:"text-sm font-medium overflow-hidden w-0 group-hover:w-auto opacity-0 group-hover:opacity-100 transition-all duration-300",children:"Sil"})]}),e.jsx("img",{src:a.url,alt:"Full View",className:"max-w-[90vw] max-h-[90vh] object-contain animate-in zoom-in-95 duration-300 select-none relative z-30",onClick:t=>t.stopPropagation()})]})]})};export{P as default};
